<meta charset="UTF-8">
<script
        src="http://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<script>
    "use strict";

    /**
     * *Написать цикл, который создает массив промисов. Внутри каждого промиса происходит обращение к ресурсу
     * (https://jsonplaceholder.typicode.com/users/number), где вместо number подставляется число от 1 до 10.
     * В итоге должно получиться 10 промисов. Следует дождаться выполнения загрузки всеми промисами и далее вывести
     * массив загруженных данных.
     */

    const arr = new Array(10);
    Promise.all(
      arr.fill(0).map(
        (item, idx) => fetch(`https://jsonplaceholder.typicode.com/users/${idx + 1}`)
          .then(
            (response) => response.json()
          )
      )
    ).then(
      (users) => console.log(users)
    );

    /*const arrPromise = []; //массив для промисов
    const arrResponse = []; //массив для результатов загрущки
    for (let i = 1; i <= 10; i++) {
        const request = `https://jsonplaceholder.typicode.com/users/${i}`;
        arrPromise.push(
          new Promise((resolve, reject) => {
              let xhr = new XMLHttpRequest();
              xhr.open('GET', request);
              xhr.send();
              xhr.onload = function () {
                  if (xhr.readyState === XMLHttpRequest.DONE) {
                      resolve(JSON.parse(xhr.responseText));
                  } else {
                      let error = new Error(this.statusText);
                      error.code = this.status;
                      reject(error);
                  }
              };
              xhr.onerror = function () {
                  reject('Соединение с JSON сервером не установлено');

              };
          })
        );
    }

    //resolve для каждого промиса
    arrPromise.forEach((promise) =>
      promise.then(
        (object) => {
            //добавить ответ в массив
            arrResponse.push(object);
        },
        (message) => {
            alert(message);
        }
      ));

    //вывод результата
    console.log(arrResponse);*/

</script>
